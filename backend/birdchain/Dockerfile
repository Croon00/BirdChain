FROM adoptopenjdk:11-jre-hotspot

# 환경 변수 설정을 위한 ARG 설정
ARG MYSQL_PORT
ARG MYSQL_USERNAME
ARG MYSQL_PASSWORD
ARG AWS_CREDENTIALS_ACCESSKEY
ARG AWS_CREDENTIALS_SECRETKEY

# ARG로 받은 값을 환경 변수에 설정
ENV MYSQL_PORT=${MYSQL_PORT} \
    MYSQL_USERNAME=${MYSQL_USERNAME} \
    MYSQL_PASSWORD=${MYSQL_PASSWORD} \
    AWS_CREDENTIALS_ACCESSKEY=${AWS_CREDENTIALS_ACCESSKEY} \
    AWS_CREDENTIALS_SECRETKEY=${AWS_CREDENTIALS_SECRETKEY}

WORKDIR /app
COPY build/libs/*.jar app.jar
EXPOSE 8080
CMD ["java", "-jar", "app.jar"]
